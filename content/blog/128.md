---
title:      Générer un tableau Markdown en Python
date:       2016-03-29
author:     Michel Casabianca
email:      michel.casabianca@gmail.com
id:         128
categories: []
tags:       [python, markdown]
lang:       fr
toc:        false
new:        true
---

J'ai eu aujourd'hui à générer un document [Mardown](https://fr.m.wikipedia.org/wiki/Markdown) qui comportait des tableaux. Voici le code qui génère le tableau au format Markdown à partir d'une liste des en-têtes de colonnes et d'une liste de lignes :

<!--more-->

```python
#!/usr/bin/env python
# encoding: UTF-8


def generate_markdown_table(heads, cells):
    def length(s):
        if isinstance(s, unicode):
            return len(s)
        elif isinstance(s, str):
            return len(s.decode('UTF-8'))
        else:
            return len(str(s).decode('UTF-8'))
    def row_width(row):
        return max([length(e) for e in row])
    cell_width = max(row_width(heads), max([row_width(l) for l in cells]))
    table = u' | '.join([unicode(str(h), 'UTF-8').ljust(cell_width, ' ') for h in heads])
    table += '\n' + u' | '.join(['-'*cell_width for _ in range(len(heads))])
    for line in cells:
        table += '\n' + ' | '.join([unicode(str(e), 'UTF-8').ljust(cell_width, ' ') for e in line])
    return table+'\n'


if __name__ == '__main__':
    headers = ('foo', 'bar')
    lines = ((1, 2), (3, 4))
    print(generate_markdown_table(headers, lines))
```

*Enjoy!*